(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{101:function(t,e,c){},102:function(t,e,c){},103:function(t,e,c){},104:function(t,e,c){},106:function(t,e,c){},125:function(t,e,c){},126:function(t,e,c){},127:function(t,e,c){},128:function(t,e,c){},129:function(t,e,c){},131:function(t,e,c){},134:function(t,e,c){"use strict";c.r(e);var n=c(2),a=c(0),r=c.n(a),o=c(12),s=c.n(o),u=c(25),i=c(9),l=c(81),b=(c(101),c(16));c(102),c(103);var j=function(t){var e=t.children;return Object(n.jsx)("div",{className:"Container",children:e})};var d=function(){return Object(n.jsx)("h1",{children:" Contact Service Home Page"})},O=c(51),f=function(t){return t.contacts.items},m={getToken:function(t){return t.auth.token},isAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getUserEmail:function(t){return t.auth.user.email},getContactsItems:f,getContactsError:function(t){return t.contacts.error},getContactsLoading:function(t){return t.contacts.loading},getContactList:Object(O.a)([f,function(t){return t.contacts.filter}],(function(t,e){var c=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(c)}))}))};c(104);var p=function(){var t=Object(i.c)(m.isAuthenticated);return Object(n.jsxs)("nav",{className:"mainNav",children:[Object(n.jsx)(u.b,{to:"/",exact:!0,className:"link",activeClassName:"activeLink",children:"Main"}),t&&Object(n.jsx)(u.b,{to:"/contacts",className:"link",activeClassName:"activeLink",children:"Contacts"})]})};c(106);var h=function(){return Object(n.jsxs)("div",{className:"authNav",children:[Object(n.jsx)(u.b,{to:"/register",className:"link",activeClassName:"activeLink",children:"Register"}),Object(n.jsx)(u.b,{to:"/login",className:"link",activeClassName:"activeLink",children:"Log In"})]})},g=c.p+"static/media/avatar.138b15d2.png",C=c(24),x=c.n(C),v=c(8),y={registerRequest:Object(v.b)("auth/registerRequest"),registerSuccess:Object(v.b)("auth/registerSuccess"),registerError:Object(v.b)("auth/registerError"),loginRequest:Object(v.b)("auth/loginRequest"),loginSuccess:Object(v.b)("auth/loginSuccess"),loginError:Object(v.b)("auth/loginError"),logoutRequest:Object(v.b)("auth/logoutRequest"),logoutSuccess:Object(v.b)("auth/logoutSuccess"),logoutError:Object(v.b)("auth/logoutError"),getCurrentUserRequest:Object(v.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(v.b)("auth/getCurrentUserRequest"),getCurrentUserError:Object(v.b)("auth/getCurrentUserError"),fetchContactsRequest:Object(v.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(v.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(v.b)("contacts/fetchContactsError"),addContactsRequest:Object(v.b)("contacts/addContactsRequest"),addContactsSuccess:Object(v.b)("contacts/addContactsSuccess"),addContactsError:Object(v.b)("contacts/addContactsError"),deleteContactRequest:Object(v.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(v.b)("contacts/deleteContactSuccess"),deleteContactError:Object(v.b)("contacts/deleteContactError"),updateContactRequest:Object(v.b)("contacts/updateContactRequest"),updateContactSuccess:Object(v.b)("contacts/updateContactSuccess"),updateContactError:Object(v.b)("contacts/updateContactError"),filterContact:Object(v.b)("contacts/changeFilter")};x.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var S=function(t){x.a.defaults.headers.common.Authorization="Bearer ".concat(t)},N=function(){x.a.defaults.headers.common.Authorization=""},E={register:function(t){return function(e){e(y.registerRequest()),x.a.post("/users/signup",t).then((function(t){S(t.data.token),e(y.registerSuccess(t.data))})).catch((function(t){return e(y.registerError(t.message))}))}},logIn:function(t){return function(e){e(y.loginRequest()),x.a.post("/users/login",t).then((function(t){S(t.data.token),e(y.loginSuccess(t.data))})).catch((function(t){return e(y.loginError(t.message))}))}},logOut:function(){return function(t){t(y.logoutRequest()),x.a.post("/users/logout").then((function(e){N(),t(y.logoutSuccess(e.data))})).catch((function(e){return t(y.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var c=e().auth.token;c&&(S(c),t(y.getCurrentUserRequest()),x.a.get("/users/current").then((function(e){t(y.getCurrentUserSuccess(e.data))})).catch((function(e){return t(y.getCurrentUserError(e.message))})))}},fetchContacts:function(){return function(t){t(y.fetchContactsRequest()),x.a.get("/contacts").then((function(e){var c=e.data;return t(y.fetchContactsSuccess(c))})).catch((function(e){return t(y.fetchContactsError(e.message))}))}},addContact:function(t){return function(e){e(y.addContactsRequest()),x.a.post("/contacts",t).then((function(t){var c=t.data;return e(y.addContactsSuccess(c))})).catch((function(t){return e(y.addContactsError(t.message))}))}},deleteContact:function(t){return function(e){e(y.deleteContactRequest()),x.a.delete("/contacts/".concat(t)).then((function(){return e(y.deleteContactSuccess(t))})).catch((function(t){return e(y.deleteContactError(t.message))}))}},updateContact:function(t){return function(e){e(y.updateContactRequest()),x.a.patch("/contacts/".concat(t)).then((function(){return e(y.updateContactSuccess(t))})).catch((function(t){return e(y.updateContactError(t.message))}))}}},k=(c(125),c(172)),R=c(169),w=Object(R.a)({button:{display:"block",letterSpacing:"1px",textTransform:"none",fontSize:"14px"}});var q=function(){var t=Object(i.c)(m.getUserName),e=Object(i.c)(m.getUserEmail),c=Object(i.b)(),a=w();return Object(n.jsxs)("div",{className:"userMenu",children:[Object(n.jsx)("img",{src:g,alt:"",width:"32",className:"userAvatar"}),Object(n.jsxs)("span",{className:"userName",children:["Welcome, ",Object(n.jsx)("b",{children:t})," "," (".concat(e,")")]}),Object(n.jsx)(k.a,{type:"button",size:"small",variant:"contained",onClick:function(){return c(E.logOut())},className:a.button,children:"Logout"})]})};c(126);var F=function(){var t=Object(i.c)(m.isAuthenticated);return Object(n.jsxs)("div",{className:"AppBar",children:[Object(n.jsx)(p,{}),t?Object(n.jsx)(q,{}):Object(n.jsx)(h,{})]})},U=c(27),T=(c(127),c(181)),z=Object(R.a)({textField:{marginBottom:"15px"},button:{display:"block",letterSpacing:"1px"}});var L=function(){var t=Object(a.useState)(""),e=Object(U.a)(t,2),c=e[0],r=e[1],o=Object(a.useState)(""),s=Object(U.a)(o,2),u=s[0],l=s[1],b=Object(a.useState)(""),j=Object(U.a)(b,2),d=j[0],O=j[1],f=Object(i.b)(),m=function(t){switch(t.currentTarget.name){case"name":r(t.currentTarget.value);break;case"email":l(t.currentTarget.value);break;case"password":O(t.currentTarget.value);break;default:return}},p=z();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Register Page"}),Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==c.trim()&&""!==u.trim()&&""!==d.trim()?(f(E.register({name:c,email:u,password:d})),r(""),l(""),O("")):alert("Fill all fields!")},className:"regForm",autoComplete:"off",children:[Object(n.jsx)(T.a,{type:"text",name:"name",value:c,onChange:m,className:p.textField,size:"small",label:"Name",variant:"outlined"}),Object(n.jsx)(T.a,{type:"email",name:"email",value:u,onChange:m,className:p.textField,size:"small",label:"E-mail",variant:"outlined"}),Object(n.jsx)(T.a,{type:"password",name:"password",value:d,onChange:m,className:p.textField,size:"small",label:"Password",variant:"outlined"}),Object(n.jsx)(k.a,{className:p.button,size:"small",variant:"contained",color:"primary",type:"submit",children:"Register"})]})]})},A=(c(128),Object(R.a)({textField:{marginBottom:"15px"},button:{display:"block",letterSpacing:"1px"}}));var B=function(){var t=Object(a.useState)(""),e=Object(U.a)(t,2),c=e[0],r=e[1],o=Object(a.useState)(""),s=Object(U.a)(o,2),u=s[0],l=s[1],b=Object(i.b)(),j=function(t){switch(t.currentTarget.name){case"email":r(t.currentTarget.value);break;case"password":l(t.currentTarget.value);break;default:return}},d=A();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Login Page"}),Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==c.trim()&&""!==u.trim()?(b(E.logIn({email:c,password:u})),r(""),l("")):alert("Fill all fields!")},className:"logForm",autoComplete:"off",children:[Object(n.jsx)(T.a,{type:"email",name:"email",value:c,onChange:j,className:d.textField,size:"small",label:"E-mail",variant:"outlined"}),Object(n.jsx)(T.a,{type:"password",name:"password",value:u,onChange:j,className:d.textField,size:"small",label:"Password",variant:"outlined"}),Object(n.jsx)(k.a,{className:d.button,size:"small",variant:"contained",color:"primary",type:"submit",children:"Login"})]})]})},I=(c(129),c(180)),P=c(82),D=c.n(P),M=c(175),J=c(179),H=c(178),W=c(174),G=c(176),K=c(177),Q=Object(R.a)({container:{boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)",borderRadius:"4px",width:500},headRow:{backgroundColor:"#3f51b5"},body:{"& tr:hover":{backgroundColor:"rgba(0,0,0,0.1)"}},bodyRow:{},headCell:{padding:10,color:"white",textTransform:"uppercase",letterSpacing:1},cell:{padding:10}}),V=function(){var t=Object(i.b)(),e=Object(i.c)(m.getContactList);Object(a.useEffect)((function(){e.length||t(E.fetchContacts())}),[]);var c=Q();return Object(n.jsx)(W.a,{className:c.container,children:Object(n.jsxs)(M.a,{className:c.table,"aria-label":"customized table",children:[Object(n.jsx)(G.a,{children:Object(n.jsxs)(K.a,{className:c.headRow,children:[Object(n.jsx)(H.a,{className:c.headCell,children:"Name"}),Object(n.jsx)(H.a,{className:c.headCell,children:"Number"}),Object(n.jsx)(H.a,{className:c.headCell,children:"Delete"})]})}),Object(n.jsx)(J.a,{className:c.body,children:e&&e.map((function(e){var a=e.name,r=e.number,o=e.id;return Object(n.jsxs)(K.a,{className:c.bodyRow,children:[Object(n.jsx)(H.a,{className:c.cell,component:"td",scope:"row",children:a}),Object(n.jsx)(H.a,{className:c.cell,children:r}),Object(n.jsx)(H.a,{className:c.cell,children:Object(n.jsx)(I.a,{onClick:function(){return t(E.deleteContact(o))},"aria-label":"delete",size:"small",children:Object(n.jsx)(D.a,{})})})]},o)}))})]})})},X=(c(131),c(83)),Y=c.n(X),Z=Object(R.a)({textField:{marginBottom:"15px"}});var $=function(){var t=Object(i.b)(),e=Object(a.useState)(""),c=Object(U.a)(e,2),r=c[0],o=c[1],s=Object(a.useState)(""),u=Object(U.a)(s,2),l=u[0],b=u[1],j=function(t){var e=t.currentTarget,c=e.name,n=e.value;switch(c){case"name":o(n);break;case"number":b(n);break;default:return}},d=Object(i.c)((function(t){return m.getContactsItems(t)})),O=Z();return Object(n.jsxs)("form",{className:"Form",onSubmit:function(e){if(e.preventDefault(),""!==r.trim()&&""!==l.trim()){var c=function(){var t=r.toLowerCase();return d.find((function(e){return e.name.toLowerCase()===t}))}();c?alert("".concat(c.name," is already in contacts.")):(t(E.addContact({name:r,number:l})),o(""),b(""))}else alert("Fill all fields!")},children:[Object(n.jsx)(T.a,{type:"text",name:"name",value:r,onChange:j,className:O.textField,size:"small",label:"Name",variant:"outlined"}),Object(n.jsx)(T.a,{type:"text",name:"number",value:l,onChange:j,className:O.textField,size:"small",label:"Number",variant:"outlined"}),Object(n.jsx)(k.a,{type:"submit",variant:"contained",color:"primary",size:"small",startIcon:Object(n.jsx)(Y.a,{}),children:"add contact"})]})},_=Object(R.a)({filter:{marginBottom:15}}),tt=function(){var t=Object(i.b)(),e=_();return Object(n.jsx)(T.a,{className:e.filter,autoComplete:"off",type:"text",name:"filter",onChange:function(e){return t(y.filterContact(e.target.value))},size:"small",label:"Find contact by Name",variant:"outlined"})};var et=function(){var t=Object(i.c)((function(t){return m.getContactsError(t)})),e=Object(i.c)((function(t){return m.getContactsLoading(t)}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Phonebook"}),Object(n.jsx)($,{}),Object(n.jsx)("h2",{children:"Contacts"}),Object(n.jsx)(tt,{}),e&&Object(n.jsx)("p",{children:" Loading... "}),t&&Object(n.jsx)("p",{children:" Sorry, something goes wrong: "+t}),Object(n.jsx)(V,{})]})},ct=c(32),nt=c(59),at=function(t){var e=t.component,c=t.redirectTo,a=Object(nt.a)(t,["component","redirectTo"]),r=Object(i.c)(m.isAuthenticated);return Object(n.jsx)(b.b,Object(ct.a)(Object(ct.a)({},a),{},{render:function(t){return r?Object(n.jsx)(e,Object(ct.a)({},t)):Object(n.jsx)(b.a,{to:c})}}))},rt=function(t){var e=t.component,c=t.redirectTo,a=Object(nt.a)(t,["component","redirectTo"]),r=Object(i.c)(m.isAuthenticated);return Object(n.jsx)(b.b,Object(ct.a)(Object(ct.a)({},a),{},{render:function(t){return r&&a.restricted?Object(n.jsx)(b.a,{to:c}):Object(n.jsx)(e,Object(ct.a)({},t))}}))};var ot,st,ut,it,lt,bt,jt,dt=function(){var t=Object(i.b)();return Object(a.useEffect)((function(){t(E.getCurrentUser())}),[]),Object(n.jsxs)(j,{children:[Object(n.jsx)(F,{}),Object(n.jsxs)(b.d,{children:[Object(n.jsx)(rt,{path:"/",exact:!0,component:d}),Object(n.jsx)(rt,{path:"/register",component:L,restricted:!0,redirectTo:"/contacts"}),Object(n.jsx)(rt,{path:"/login",component:B,restricted:!0,redirectTo:"/contacts"}),Object(n.jsx)(at,{path:"/contacts",component:et,redirectTo:"/login"})]})]})},Ot=c(49),ft=c(29),mt=c(84),pt=c.n(mt),ht=c(7),gt=c(19),Ct={name:null,email:null},xt=Object(v.c)(Ct,(ot={},Object(ht.a)(ot,y.registerSuccess.type,(function(t,e){return e.payload.user})),Object(ht.a)(ot,y.loginSuccess.type,(function(t,e){return e.payload.user})),Object(ht.a)(ot,y.logoutSuccess.type,(function(){return Ct})),Object(ht.a)(ot,y.getCurrentUserSuccess.type,(function(t,e){return e.payload})),ot)),vt=Object(v.c)(null,(st={},Object(ht.a)(st,y.registerSuccess.type,(function(t,e){return e.payload.token})),Object(ht.a)(st,y.loginSuccess.type,(function(t,e){return e.payload.token})),Object(ht.a)(st,y.logoutSuccess.type,(function(){return null})),st)),yt=Object(v.c)(null,(ut={},Object(ht.a)(ut,y.registerError.type,(function(t,e){return e.payload})),Object(ht.a)(ut,y.loginError.type,(function(t,e){return e.payload})),Object(ht.a)(ut,y.logoutError.type,(function(t,e){return e.payload})),Object(ht.a)(ut,y.getCurrentUserError.type,(function(t,e){return e.payload})),ut)),St=Object(v.c)(!1,(it={},Object(ht.a)(it,y.registerSuccess.type,(function(){return!0})),Object(ht.a)(it,y.loginSuccess.type,(function(){return!0})),Object(ht.a)(it,y.getCurrentUserSuccess.type,(function(){return!0})),Object(ht.a)(it,y.logoutSuccess.type,(function(){return!1})),Object(ht.a)(it,y.registerError.type,(function(){return!1})),Object(ht.a)(it,y.loginError.type,(function(){return!1})),Object(ht.a)(it,y.getCurrentUserError.type,(function(){return!1})),it)),Nt=Object(v.c)([],(lt={},Object(ht.a)(lt,y.fetchContactsSuccess.type,(function(t,e){return e.payload})),Object(ht.a)(lt,y.addContactsSuccess.type,(function(t,e){return[].concat(Object(Ot.a)(t),[e.payload])})),Object(ht.a)(lt,y.deleteContactSuccess.type,(function(t,e){var c=t.filter((function(t){return t.id!==e.payload}));return Object(Ot.a)(c)})),Object(ht.a)(lt,y.logoutSuccess.type,(function(){return[]})),lt)),Et=Object(v.c)("",Object(ht.a)({},y.filterContact.type,(function(t,e){return e.payload}))),kt=Object(v.c)(!1,(bt={},Object(ht.a)(bt,y.fetchContactsRequest.type,(function(){return!0})),Object(ht.a)(bt,y.fetchContactsSuccess.type,(function(){return!1})),Object(ht.a)(bt,y.fetchContactsError.type,(function(){return!1})),Object(ht.a)(bt,y.addContactsRequest.type,(function(){return!0})),Object(ht.a)(bt,y.addContactsSuccess.type,(function(){return!1})),Object(ht.a)(bt,y.addContactsError.type,(function(){return!1})),Object(ht.a)(bt,y.deleteContactRequest.type,(function(){return!0})),Object(ht.a)(bt,y.deleteContactSuccess.type,(function(){return!1})),Object(ht.a)(bt,y.deleteContactError.type,(function(){return!1})),bt)),Rt=Object(v.c)("",(jt={},Object(ht.a)(jt,y.fetchContactsError.type,(function(t,e){return e.payload})),Object(ht.a)(jt,y.addContactsError.type,(function(t,e){return e.payload})),Object(ht.a)(jt,y.deleteContactError.type,(function(t,e){return e.payload})),Object(ht.a)(jt,y.fetchContactsRequest.type,(function(){return""})),Object(ht.a)(jt,y.addContactsRequest.type,(function(){return""})),Object(ht.a)(jt,y.deleteContactRequest.type,(function(){return""})),jt)),wt={contacts:Object(gt.c)({items:Nt,filter:Et,loading:kt,error:Rt}),auth:Object(gt.c)({user:xt,isAuthenticated:St,token:vt,error:yt})},qt=Object(Ot.a)(Object(v.d)({serializableCheck:{ignoredActions:[ft.a,ft.f,ft.b,ft.c,ft.d,ft.e]}})),Ft={key:"auth",storage:pt.a,whitelist:["token"]},Ut=Object(v.a)({reducer:{contacts:wt.contacts,auth:Object(ft.g)(Ft,wt.auth)},middleware:qt,devTools:!1}),Tt={store:Ut,persistor:Object(ft.h)(Ut)};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(i.a,{store:Tt.store,children:Object(n.jsx)(l.a,{loading:null,persistor:Tt.persistor,children:Object(n.jsx)(u.a,{children:Object(n.jsx)(dt,{})})})})}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.6dd0c745.chunk.js.map